<div>
    <ng-container #flow="flow" [flowConfig]="flowConfig"></ng-container>
</div>
<div class="upload-root-wrapper">
    <mat-card class="upload-title-card" *ngIf="screenWidth === 'lg'">
        <mat-card-content class="upload-title-card-content">
            <span>France-Transfert permet d'envoyer des fichiers volumineux de manière sécurisée à un agent de l'Etat ou
                entre agents.</span>
        </mat-card-content>
    </mat-card>
    <div class="upload-wrapper" [ngStyle]="styleObject()">
        <ft-loader *ngIf="uploadValidated && uploadStarted && !uploadFinished"
            (transferCancelled)="onTransferCancelled($event)" (transferFinished)="onTransferFinished($event)"
            class="loader-wrapper"></ft-loader>
        <ft-check-validation-code *ngIf="uploadStarted && !uploadValidated"
            (transferValidated)="onTransferValidated($event)" [component]="'upload'" [email]="senderEmail"
            class="check-validation-code-wrapper">
        </ft-check-validation-code>
        <ft-list-elements *ngIf="!uploadStarted" [component]="'upload'" [flow]="flow" [screenWidth]="screenWidth"
            (listExpanded)="onListExpanded($event)" class="list-elements-wrapper"
            [ngClass]="{'expanded': listExpanded, 'reduced' : !listExpanded && hasFiles}"></ft-list-elements>
        <ft-envelope
            *ngIf="!uploadStarted && (screenWidth !== 'sm' || (screenWidth === 'sm' && hasFiles && !listExpanded))"
            (uploadStarted)="onUploadStarted($event)" class="envelope-wrapper" [ngClass]="{'reduced': listExpanded}">
        </ft-envelope>
        <ft-end-message [component]="'upload'" [availabilityDate]="availabilityDate"
            *ngIf="uploadFinished && uploadStarted" class="end-message-wrapper">
        </ft-end-message>
        <ft-satisfaction-check (satisfactionCheckDone)="onSatisfactionCheckDone($event)"
            *ngIf="uploadFinished && uploadStarted" class="satisfaction-check-wrapper"></ft-satisfaction-check>
    </div>
</div>